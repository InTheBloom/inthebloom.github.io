<!DOCTYPE html>
<html lang="ja">
<head>





<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>KaTeX導入してみる - InTheDayDream</title>
<meta name="description" content="">

<meta name="author" content="">

<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="alternate" href="/index.xml?c=257238e1a03a2dea82bd777291271528fb1abfca" type="application/rss+xml" title="RSS" />
<meta property="og:title" content="KaTeX導入してみる - InTheDayDream">
</meta>
<meta property="og:url" content="http://inthebloom.github.io/post/katex/">
<meta property="og:type" content="article">
<meta property="og:site_name" content="InTheDayDream">
<meta property="og:description" content="">

<meta property="og:image" content="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1687509951/pictures/katex/ogp_y9qwcb.png">

<meta name="twitter:card" content="summary_large_image" /></meta>
<meta name="twitter:site" content="@UU9782wsEdANDhp"></meta>
<meta name="twitter:creator" content="@UU9782wsEdANDhp"></meta>
<meta name="twitter:title" content="KaTeX導入してみる - InTheDayDream"></meta>
<meta name="twitter:url" content="http://inthebloom.github.io/post/katex/"></meta>
<meta name="twitter:description" content=""></meta>

<meta property="og:image" content="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1687509951/pictures/katex/ogp_y9qwcb.png">


<link rel="stylesheet" href="/css/main.css?c=257238e1a03a2dea82bd777291271528fb1abfca">
<link rel="stylesheet" href="/css/color.css?c=257238e1a03a2dea82bd777291271528fb1abfca">


<link rel="stylesheet" href="/css/custom.css?c=257238e1a03a2dea82bd777291271528fb1abfca">



</head>

<body class="theme-default">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              
              
          ],
          
          throwOnError : false
        });
    });
</script>



<div id="content-header" class="title">
  
  <a class="site-title" href="/">InTheDayDream</a>
  
  <span class="site-sub-title"></span>

  

  <div id="main-menu-nav">
    <div id="main-menu-nav-items">
      
        <div class="nav-item"><a href="/">Home</a></div>
      
        <div class="nav-item"><a href="/tags/">Tags</a></div>
      
        <div class="nav-item"><a href="/archives/">Archives</a></div>
      
        <div class="nav-item"><a href="/about/">About</a></div>
      
        <div class="nav-item"><a href="/search/">Search</a></div>
      
    </div>
  </div>
</div>
<div id="content" class="main">




<h1>KaTeX導入してみる</h1>

<span class="sub">Published on 2023-06-23</span><br>
<span class="sub">Last Modified 2023-09-20</span>






<div style="padding: 0em 1em; margin-bottom: 5em; margin-top: 0.7em;">
    <p style="font-size: 1.3em;">Table Of Contents</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#katexを使ってみる">KaTeXを使ってみる</a></li>
    <li><a href="#使い方">使い方</a></li>
    <li><a href="#katexテンプレート">KaTeXテンプレート</a></li>
    <li><a href="#終わりに">終わりに</a></li>
  </ul>
</nav>
</div>



<h2 id="katexを使ってみる">KaTeXを使ってみる</h2>
<p>$\LaTeX{}$風の数式を表示できるJavaScriptライブラリ(らしい)である$\KaTeX{}$を導入してみました。
本稿では、$\KaTeX$の紹介と、自分がどうやって導入したかを説明します。</p>
<p><strong>注意！</strong> 筆者は$\KaTeX{}$及び$\LaTeX{}$に全く詳しくありません。
内容がガバガバかもしれないです。</p>
<h2 id="使い方">使い方</h2>
<p><a href="https://tex2e.github.io/blog/latex/mathjax-to-katex">ここ</a>に丁寧に書いてあるので、こっちを参考にしてください。</p>
<p>私は手元で動かしたい人向けにリポジトリから窃盗する手順だけ紹介します。
リポジトリは<a href="https://github.com/KaTeX/KaTeX">こちら</a>です。</p>
<p>アクセスするとこんな画面になるはずです。</p>
<p><img src="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1687500518/pictures/katex/repo_wdawhk.png" alt=""></p>
<p>右下の方のReleasesの中のlatestがついてるやつをクリックしましょう。</p>
<p><img src="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1687500518/pictures/katex/latest_jwytzg.png" alt=""></p>
<p>こんな画面になるはずです。(私が作成してるときはv0.16.7でした。)
tarballかzipをダウンロードして解凍しましょう。</p>
<p><img src="https://res.cloudinary.com/dqoqdn2sk/image/upload/v1687500806/pictures/katex/directory_qpbpmf.png" alt=""></p>
<p>こんなファイル群が出てくるはずです。
これらをhtmlファイル内で読み込めば使用できます。</p>
<p>下は実際にこのページで使用されている設定です。
(上で貼ったページのものをちょっぴり差し替えただけです。ファイルパスは自分の環境に合わせて変える必要があります。)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;../katex/katex.css&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">defer</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;../katex/katex.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">defer</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;../katex/contrib/auto-render.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;DOMContentLoaded&#34;</span>, <span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">renderMathInElement</span>(document.<span style="color:#a6e22e">body</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">delimiters</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$$&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$$&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>},
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>},
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><p>数式のフォントサイズが気に入らなかったら、head内に次を足してください。(数字はお好みで)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">katex</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">em</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span></code></pre></div><p>もしくはdivとかの中だけフォントサイズをいじるっていう方法もあります。</p>
<h2 id="katexテンプレート">KaTeXテンプレート</h2>
<p>$\KaTeX{}$を使うときは、インライン数式なら<code>$</code>で囲みます。
行単位なら<code>$$</code>で囲みます。 そうしないとうまく動かないです。
基本の使い方は$\LaTeX{}$と同じなので、$\LaTeX{}$記法はググると良いです。</p>
<p>よく使いそうな数式を紹介します。</p>
<ol>
<li>行番号あり数式</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>$$
</span></span><span style="display:flex;"><span>\begin{equation}
</span></span><span style="display:flex;"><span>    \int_0^{2\pi{}} \sin{}x dx = 0
</span></span><span style="display:flex;"><span>\end{equation}
</span></span><span style="display:flex;"><span>$$
</span></span></code></pre></div><p>$$ \begin{equation} \int_0^{2\pi{}} \sin{}x dx = 0
\end{equation} $$</p>
<ol start="2">
<li>複数行に渡る数式(行番号一つ)</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>$$
</span></span><span style="display:flex;"><span>\begin{equation}
</span></span><span style="display:flex;"><span>    \begin{split}
</span></span><span style="display:flex;"><span>        \sum_{k=0}^{n} {}_n \mathrm{C}_k <span style="color:#960050;background-color:#1e0010">&amp;</span>= {}_n \mathrm{C}_0 + {}_n \mathrm{C}_1 + \dots \\
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&amp;</span>= 2^n
</span></span><span style="display:flex;"><span>    \end{split}
</span></span><span style="display:flex;"><span>\end{equation}
</span></span><span style="display:flex;"><span>$$
</span></span></code></pre></div><p>$$ \begin{equation} \begin{split} \sum_{k=0}^{n} {}_n
\mathrm{C}_k &amp;= {}_n \mathrm{C}_0 + {}_n \mathrm{C}_1 +
\dots \\ &amp;= 2^n \end{split} \end{equation} $$</p>
<ol start="3">
<li>デカ括弧</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>$$
</span></span><span style="display:flex;"><span>T = 2\pi{} \sqrt{ \frac{h}{g} \left( 1+\frac{2r^2}{5h^2} \right) } \left( 1+\frac{\theta{}^2}{16} \right)
</span></span><span style="display:flex;"><span>$$
</span></span></code></pre></div><p>$$ T = 2\pi{} \sqrt{ \frac{h}{g} \left( 1+\frac{2r^2}{5h^2}
\right) } \left( 1+\frac{\theta{}^2}{16} \right) $$
なお、絶対値やその他の括弧も基本上の例に従う。</p>
<ol start="4">
<li>インラインデカ数式</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>通常
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$\frac{a}{b}$
</span></span><span style="display:flex;"><span>$\sum_a^b$
</span></span><span style="display:flex;"><span>$\int_a^b$
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>デカ
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$\dfrac{a}{b}$
</span></span><span style="display:flex;"><span>$\displaystyle\sum_a^b$
</span></span><span style="display:flex;"><span>$\sum\limits_a^b$
</span></span><span style="display:flex;"><span>$\displaystyle\int_a^b$
</span></span><span style="display:flex;"><span>$\int\limits_a^b$
</span></span></code></pre></div><p>通常</p>
<p>$\frac{a}{b}$ $\sum_a^b$ $\int_a^b$</p>
<p>デカ</p>
<p>$\dfrac{a}{b}$ $\displaystyle\sum_a^b$
$\sum\limits_a^b$ $\displaystyle\int_a^b$
$\int\limits_a^b$</p>
<p>これはinline表示をdisplayモードに矯正するコマンドです。一番適したものを使いましょう。</p>
<ol start="5">
<li>単位をつけるために微妙に間あけるやつ</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>$1.0\,\mathrm{m}$
</span></span></code></pre></div><p>$1.0\,\mathrm{m}$</p>
<p>数式環境下での立体は基本的に\mathrm{}を使っておけば良い。
$\KaTeX{}$が対応してるかなどは知らないが、
物理単位などによっては組み込みやパッケージ等でより良いものが用意されていることがあるので、
それらを調べてから使うとなお良い。</p>
<h2 id="終わりに">終わりに</h2>
<p>あくまでテキストベースなの良いですよね。($\TeX{}$記法が再利用性が高いかは置いておくとして)</p>
<p>ただ、思ったより色々と大変でした。
特に、markdownのパースのせいで$\KaTeX{}$が崩されたりするのはかなり罠だと思います。</p>
<p>個人的な使い方としては、htmlに変換した後厳重にチェックした後放流するって感じになりそうです。</p>






<hr class="block-separater">




<div class="content-footer-item">
	Tags for this post:
	
	<a class="post-tag" href="/tags/katex/">katex</a>
	
</div>







<div class="content-footer-item neighbor">
	
	<div class="prev-post">Prev: <a href="/post/abc99c/">ABC99C - Strange Bank</a></div>
	
	
	<div class="next-post">Next: <a href="/post/abc307/">ABC307参加記録</a></div>
	
</div>











    
    
    




<script src="/js/single.js"></script>





	</div><div id="content-footer" class="sub">
  
  <div class="credit">
    Power by <a href="https://gohugo.io">Hugo</a> /
    Theme <a href="https://github.com/michimani/simplog/">simplog</a> by <a href="https://github.com/michimani/">michimani</a>
  </div>
</div></body>

</html>