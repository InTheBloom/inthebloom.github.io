<!DOCTYPE html>
<html lang="ja">
<head>





<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>天下一プログラマーコンテスト2015予選B - 天下一リテラル - InTheDayDream</title>
<meta name="description" content="">

<meta name="author" content="">

<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8">
<link rel="alternate" href="/index.xml?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8" type="application/rss+xml" title="RSS" />
<meta property="og:title" content="天下一プログラマーコンテスト2015予選B - 天下一リテラル - InTheDayDream">
<meta property="og:url" content="https://inthebloom.github.io/post/tenka1_2015_qualbb/">
<meta property="og:type" content="article">
<meta property="og:site_name" content="InTheDayDream">
<meta property="og:description" content="">

<meta property="og:image" content="https://inthebloom.github.io//images/featured_image.jpg">

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@UU9782wsEdANDhp">
<meta name="twitter:creator" content="@UU9782wsEdANDhp">
<meta name="twitter:title" content="天下一プログラマーコンテスト2015予選B - 天下一リテラル - InTheDayDream">
<meta name="twitter:url" content="https://inthebloom.github.io/post/tenka1_2015_qualbb/">
<meta name="twitter:description" content="">

<meta property="og:image" content="https://inthebloom.github.io//images/featured_image.jpg">


<link rel="stylesheet" href="/css/main.css?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8">
<link rel="stylesheet" href="/css/color.css?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8">


<link rel="stylesheet" href="/css/custom.css?c=bff1436c568763ab0dd14461be7aa7d1de9c7fb8">



</head>

<body class="theme-default">





<link rel="stylesheet" href="/katex/katex.min.css">
<script defer src="/katex/katex.min.js"></script>
<script defer src="/katex/contrib/auto-render.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              
              
          ],
          
          throwOnError : false
        });
    });
</script>



<div id="content-header" class="title">
  
  <a class="site-title" href="/">InTheDayDream</a>
  
  <span class="site-sub-title"></span>

  

  <div id="main-menu-nav">
    <div id="main-menu-nav-items">
      
        <div class="nav-item"><a href="/">Home</a></div>
      
        <div class="nav-item"><a href="/tags/">Tags</a></div>
      
        <div class="nav-item"><a href="/archives/">Archives</a></div>
      
        <div class="nav-item"><a href="/about/">About</a></div>
      
        <div class="nav-item"><a href="/search/">Search</a></div>
      
    </div>
  </div>
</div>
<div id="content" class="main">




<h1>天下一プログラマーコンテスト2015予選B - 天下一リテラル</h1>

<span class="sub">Published on 2024-02-28</span><br>
<span class="sub">Last Modified 2024-02-28</span>






<div style="padding: 0em 1em; margin-bottom: 5em; margin-top: 0.7em;">
    <p style="font-size: 1.3em;">Table Of Contents</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#問題概要">問題概要</a></li>
    <li><a href="#解法">解法</a></li>
    <li><a href="#実装">実装</a></li>
    <li><a href="#感想">感想</a></li>
  </ul>
</nav>
</div>



<h2 id="問題概要">問題概要</h2>
<p>問題</p>
<p>スクリプト言語hnwには整数型、辞書型、集合型が存在する。
整数型のリテラルは$0$以上$10^6$以下の整数を十進数で表記したものである。
辞書型、集合型のリテラルは以下の
<a
  
    href="https://ja.wikipedia.org/wiki/EBNF"
  
   target="_blank" rel="noopener">
    EBNF
</a>
に従う。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-EBNF" data-lang="EBNF"><span style="display:flex;"><span><span style="color:#66d9ef">DICT </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;{&#34;</span> , <span style="color:#66d9ef">EXPR </span>, <span style="color:#e6db74">&#34;:&#34;</span> , <span style="color:#66d9ef">EXPR </span>, { <span style="color:#e6db74">&#34;,&#34;</span> , <span style="color:#66d9ef">EXPR </span>, <span style="color:#e6db74">&#34;:&#34;</span> , <span style="color:#66d9ef">EXPR </span>} , <span style="color:#e6db74">&#34;}&#34;</span> | <span style="color:#e6db74">&#34;{}&#34;</span> ;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET  </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;{&#34;</span> , <span style="color:#66d9ef">EXPR </span>, { <span style="color:#e6db74">&#34;,&#34;</span> , <span style="color:#66d9ef">EXPR </span>} , <span style="color:#e6db74">&#34;}&#34;</span> ;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">EXPR </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">DICT </span>| <span style="color:#66d9ef">SET </span>| <span style="color:#66d9ef">INTEGER </span>;
</span></span></code></pre></div><p>集合型か辞書型のリテラル$S$が与えられる。型を判定せよ。</p>
<p>制約</p>
<ul>
<li>$\lvert S \rvert \leq 50000$</li>
<li>入力に空白は含まれない</li>
</ul>
<h2 id="解法">解法</h2>
<p>このような構文解析は<code>EXPR</code>を受け取り、型を判定するオラクルが存在すると仮定して考えると良いです。
まず、エイヤと関数だけ作ってしまいましょう。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-d" data-lang="d"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> HNW_TYPE <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    DICT<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>    SET<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>    INTEGER<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>    UNDECIDED<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> HNW_TYPE <span style="color:#a6e22e">analize_expr</span> <span style="color:#f92672">(</span>string s<span style="color:#f92672">,</span> <span style="color:#66d9ef">ref</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>まず、<code>INTEGER</code>に関しては定義に再帰的なものが含まれていないため、これを処理します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-d" data-lang="d"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&lt;=</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;9&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&lt;=</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;9&#39;</span><span style="color:#f92672">)</span> i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">INTEGER</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>別に数値をパースする必要はないので、読み飛ばしてしまいましょう。</p>
<p><code>DICT</code>/<code>SET</code>のパースをしましょう。<code>DICT</code>/<code>SET</code>は必ず<code>{</code>から始まるので、ここを見つけるところからスタートです。
さらに、<code>DICT</code>のみ空なブラケットが許されるので、これは先に判定してしまいましょう。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-d" data-lang="d"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;{&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 空のDICTのリテラル
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">DICT</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>次に何らかの<code>EXPR</code>が来ますが、これは今作っている関数に丸投げします。
現時点でこの関数に<code>EXPR</code>を処理する能力はないですが、ばっちり処理してくれるということにします。
そのあとには<code>DICT</code>であれば<code>:</code>が来て、<code>SET</code>であれば<code>,</code>か<code>}</code>が来ます。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-d" data-lang="d"><span style="display:flex;"><span><span style="color:#66d9ef">auto</span> res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">UNDECIDED</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> end_of_expr <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// any EXPR
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    analize_expr<span style="color:#f92672">(</span>s<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;:&#39;</span><span style="color:#f92672">:</span> <span style="color:#75715e">// DICT
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>            analize_expr<span style="color:#f92672">(</span>s<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">DICT</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">:</span> <span style="color:#75715e">// SET
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">SET</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">:</span> <span style="color:#75715e">// SET
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">SET</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        default:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">assert</span><span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 後ろの余計なものを処理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>            end_of_expr <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        default:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">assert</span><span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>end_of_expr<span style="color:#f92672">)</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>これでよさそうです。今までのものをつなげましょう。</p>
<h2 id="実装">実装</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-d" data-lang="d"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> HNW_TYPE <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    DICT<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>    SET<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>    INTEGER<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>    UNDECIDED<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> HNW_TYPE <span style="color:#a6e22e">analize_expr</span> <span style="color:#f92672">(</span>string s<span style="color:#f92672">,</span> <span style="color:#66d9ef">ref</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&lt;=</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;9&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">&lt;=</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;9&#39;</span><span style="color:#f92672">)</span> i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">INTEGER</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;{&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 空のDICTのリテラル
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">DICT</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">auto</span> res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">UNDECIDED</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bool</span> end_of_expr <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// any EXPR
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        analize_expr<span style="color:#f92672">(</span>s<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;:&#39;</span><span style="color:#f92672">:</span> <span style="color:#75715e">// DICT
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>                analize_expr<span style="color:#f92672">(</span>s<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">DICT</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">:</span> <span style="color:#75715e">// SET
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">SET</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">:</span> <span style="color:#75715e">// SET
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                res <span style="color:#f92672">=</span> HNW_TYPE<span style="color:#f92672">.</span><span style="color:#a6e22e">SET</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            default:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">assert</span><span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 後ろの余計なものを処理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>                i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>                end_of_expr <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            default:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">assert</span><span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>end_of_expr<span style="color:#f92672">)</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>後はこの関数に渡した返り値を見てやればよいです。</p>
<p>
<a
  
    href="https://atcoder.jp/contests/tenka1-2015-qualb/submissions/50711038"
  
   target="_blank" rel="noopener">
    提出
</a>
</p>
<h2 id="感想">感想</h2>
<p>$\lvert S \rvert \leq 50000$だったので、特に考えずに再帰処理することができました。
この問題に関しては判定するだけであって、かつ変な入力は与えられないのでそこまで大変ではありませんでした。
しかし、ガチ解析をするにはもう少しBNF等に対する専門知識が必要になると思います。(私は完全に雰囲気で解いています。)</p>
<p>この問題の公式解説が見つからなかったのですが、どこにあるか知っている人いませんか&hellip;？</p>






<hr class="block-separater">




<div class="content-footer-item">
	Tags for this post:
	
	<a class="post-tag" href="/tags/%E7%AB%B6%E6%8A%80%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/">競技プログラミング</a>
	
	<a class="post-tag" href="/tags/%E4%B8%80%E5%95%8F%E8%A7%A3%E8%AA%AC/">一問解説</a>
	
</div>







<div class="content-footer-item neighbor">
	
	<div class="prev-post">Prev: <a href="/post/abc74d/">ABC74D - Restoring Road Network</a></div>
	
	
	<div class="next-post">Next: <a href="/post/20th-birthday/">20歳になりました。</a></div>
	
</div>













    
    
    
    <div class="related-tag-category-list">
        <h4 style="font-size: 1.3em;">Other posts tagged by "競技プログラミング"</h4>
        <ul class="post-list">
          
          <li class="post-item">
  <div class="post-date sub">2025-08-21</div>
  <div class="post-title"><a href="/post/solve-extra-constraints/">ABC239EとABC372Eをより強い条件で解いてみる</a></div>
  
</li>
          
          <li class="post-item">
  <div class="post-date sub">2025-07-12</div>
  <div class="post-title"><a href="/post/range-kth-smallest-part2/">Range Kth Smallestに対するもう2つの解法</a></div>
  
</li>
          
          <li class="post-item">
  <div class="post-date sub">2025-07-05</div>
  <div class="post-title"><a href="/post/icpc2025/">ICPC国内予選2025（Chofu Mai）</a></div>
  
</li>
          
        </ul>
        <div class="more-area">
          
          <a class="more" href='/tags/%e7%ab%b6%e6%8a%80%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0/'>more ...</a>
          
      </div>
        </div>
    

    
    
    
    <div class="related-tag-category-list">
        <h4 style="font-size: 1.3em;">Other posts tagged by "一問解説"</h4>
        <ul class="post-list">
          
          <li class="post-item">
  <div class="post-date sub">2025-04-09</div>
  <div class="post-title"><a href="/post/aoj1668/">ICPC国内予選2023 Problem E - Tampered Records（改竄された史料）</a></div>
  
</li>
          
          <li class="post-item">
  <div class="post-date sub">2024-10-29</div>
  <div class="post-title"><a href="/post/icpc-2024-domestic-d/">ICPC模擬国内予選D 過去問の共有</a></div>
  
</li>
          
          <li class="post-item">
  <div class="post-date sub">2024-09-10</div>
  <div class="post-title"><a href="/post/abc288d/">ABC288D - Range Add Query</a></div>
  
</li>
          
        </ul>
        <div class="more-area">
          
          <a class="more" href='/tags/%e4%b8%80%e5%95%8f%e8%a7%a3%e8%aa%ac/'>more ...</a>
          
      </div>
        </div>
    




<script src="/js/single.js"></script>





	</div><div id="content-footer" class="sub">
  
  <div class="credit">
    Power by <a href="https://gohugo.io">Hugo</a> /
    Theme <a href="https://github.com/michimani/simplog/">simplog</a> by <a href="https://github.com/michimani/">michimani</a>
  </div>
</div></body>

</html>